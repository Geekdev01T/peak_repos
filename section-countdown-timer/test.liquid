<style>
  .peakconversion-countdown-banner-{{section.id}}-wrapper {
      padding-top: 2em;
      padding-bottom:2em;
  }

  @media screen and (min-width: 750px) {
      .peakconversion-countdown-banner-{{section.id}}-wrapper {
          padding-top: var(--pt-desktop);
          padding-bottom: var(--pb-desktop);
      }
  }

  .peakconversion-countdown-banner-{{section.id}} {
      position: relative;
      height: var(--section-height-mobile);
      overflow: hidden;
  }

  @media screen and (min-width: 750px) {
      .peakconversion-countdown-banner-{{section.id}} {
          height: var(--section-height);
      }
  }

  .peakconversion-countdown-banner-{{section.id}} .peakconversion-countdown-banner-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
  }

  .peakconversion-countdown-banner-{{section.id}} .peakconversion-countdown-banner-image--desktop {
      display: none;
  }

  @media screen and (min-width: 750px) {
      .peakconversion-countdown-banner-{{section.id}} .peakconversion-countdown-banner-image--desktop {
          display: block;
      }

      .peakconversion-countdown-banner-{{section.id}} .peakconversion-countdown-banner-image--mobile {
          display: none;
      }
  }
</style>
<div
  class="peakconversion-countdown-banner-{{section.id}}-wrapper"
  style="
    --pt: 39px;
    --pt-desktop: 52px;
    --pb: 39px;
    --pb-desktop: 52px;
    background-color:#ffffff;
  "
>
  <div
    class="
                peakconversion-countdown-banner-{{section.id}}
      page-width
    "
    style="
      --section-height: 600px;
      --section-height-mobile: 500px;
    "
  >
    <div
      style="
                    height: 100%; width: 100%; position: relative; overflow: hidden;
        border-radius: {{ section.settings.image_radius }}px;
      "
    >
      <img
        class="
                          peakconversion-countdown-banner-image

          peakconversion-countdown-banner-image--desktop
        "
        src="{% if section.settings.image_desktop != blank %}{{ section.settings.image_desktop | img_url: 'master' }} {% else %}//section.store/cdn/shop/files/high-fashion-model-in-red_500x.jpg?v=1684748546 {% endif %}"
        alt=""
        loading="lazy"
      >

      <img
        class="peakconversion-countdown-banner-image peakconversion-countdown-banner-image--mobile"
        src="{% if section.settings.image_mobile != blank %}{{ section.settings.image_mobile | img_url: 'master' }}{% else %}//section.store/cdn/shop/files/fashion-model-in-red-suit_500x.jpg?v=1684747380 {% endif %}"
        alt=""
        loading="lazy"
      >

      <style>
        .peakconversion-countdown-banner-content-{{section.id}} {
            position: relative;
            z-index: 1;
            overflow: hidden;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            text-align: center;
            line-height: 1.1;
        }
      </style>
      <div class="peakconversion-countdown-banner-content-{{section.id}}">
        <div
          style="
            opacity: 0.3;
            background-color: #000000;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: block;
          "
        ></div>

        <style>
          .peakconversion-countdown-banner-heading-{{section.id}}-{{section.id}}-1684746960fabb856f-0 {}

          .peakconversion-countdown-banner-heading-{{section.id}}-{{section.id}}-1684746960fabb856f-0 p {
              margin: 0 10px;
          }
        </style>
        <div
          class="peakconversion-countdown-banner-heading-{{section.id}}-{{section.id}}-1684746960fabb856f-0"
          style="
            font-size: {{ section.settings.text_size }}px;
            color: {{ section.settings.text_color }};
          "
        >
          <p>
            <strong>
              {{- section.settings.heading -}}
            </strong>
          </p>
        </div>

        <style>
          .peakconversion-countdown-banner-button-{{section.id}}-{{section.id}}-1684746960fabb856f-1 {
              padding: 9px 25px;
              text-decoration: none;
          }

          @media screen and (min-width: 750px) {
              .peakconversion-countdown-banner-button-{{section.id}}-{{section.id}}-1684746960fabb856f-1 {
                  padding: 11px 25px;
              }
          }
        </style>
        <a
          href=""
          class="peakconversion-countdown-banner-button-{{section.id}}-{{section.id}}-1684746960fabb856f-1"
          style="
            color: {{ section.settings.btn_text_color }};
            background-color: {{ section.settings.btn_background }};
            border-radius: {{ section.settings.btn_radius }}px;
            font-size: {{ section.settings.btn_text_size }}px;
            border: {{ section.settings.btn_border_size }}px {{ section.settings.btn_border_color }} {{ section.settings.btn_border_type }};
            margin: {{ section.settings.btn_mt }}px 10px {{ section.settings.btn_mb }}px 10px;
            padding-left:{{ section.settings.btn_pl }}px;
            padding-right:{{ section.settings.btn_pr }}px;
          "
        >
          {{ section.settings.btn_text }}
        </a>

        <style>
          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 {
              display: flex;
              justify-content: center;
              align-items: center;
              gap: 5px;
              margin: 5px 10px;
          }

          @media (min-width: 750px) {
              .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 {
                  gap: 20px;
              }
          }

          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block {
              position: relative;
              border-radius: 12px;
              /*padding: 20px;*/
              padding: 0 1rem;
          }

          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block__num,
          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block__unit {
              display: block;
              text-align: center;
          }

          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block__num {
              font-size: {{ section.settings.timer_numb_size }}px;
              color:{{section.settings.timer_numb_color}};
              line-height: 1;
          }

          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block__unit {
              text-transform: uppercase;
              margin-top: {{section.settings.timer_text_mt}}px;
              font-size: {{ section.settings.timer_text_size }}px;
              color:{{section.settings.timer_text_color}};
          }

          @media (min-width: 750px) {
              .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-block__unit {
                  font-size: {{ section.settings.timer_text_size }}px;
              }
          }

          .peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2 .peakconversion-time-divier {
              position: relative;
              width: 1px;
              height: 40px;
              background-color: var(--color);
          }
        </style>

        <div
          class="peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2"
        >
          <div class="peakconversion-time-block">
            <span class="peakconversion-time-block__num peakconversion-js-timer-days">441</span>
            <span class="peakconversion-time-block__unit">Days</span>
          </div>

          <span class="peakconversion-time-divier"></span>
          <div class="peakconversion-time-block">
            <span class="peakconversion-time-block__num peakconversion-js-timer-hours">12</span>
            <span class="peakconversion-time-block__unit">Hours</span>
          </div>

          <span class="peakconversion-time-divier"></span>
          <div class="peakconversion-time-block">
            <span class="peakconversion-time-block__num peakconversion-js-timer-minutes">5</span>
            <span class="peakconversion-time-block__unit">Minutes</span>
          </div>

          <span class="peakconversion-time-divier"></span>
          <div class="peakconversion-time-block">
            <span class="peakconversion-time-block__num peakconversion-js-timer-seconds">18</span>
            <span class="peakconversion-time-block__unit">Seconds</span>
          </div>
        </div>

        <style>
          .peakconversion-countdown-timer-completed-text-{{section.id}}-{{section.id}}-1684746960fabb856f-2 {
              display: none;
          }
        </style>
        <div
          class="peakconversion-countdown-timer-completed-text-{{section.id}}-{{section.id}}-1684746960fabb856f-2"
        ></div>

        <script type="text/javascript">
          (function () {

              function startTimer() {
                  const second = 1000,
                      minute = second * 60,
                      hour = minute * 60,
                      day = hour * 24,
                      wrapper = document.querySelector(
                          '.peakconversion-countdown-timer-{{section.id}}-{{section.id}}-1684746960fabb856f-2'
                      ),
                   countDown = new Date('2024-12-01').getTime();

                  console.log('start timer, end date:' + countDown)
                  const interval = setInterval(function () {
                      let now = new Date().getTime(),
                          distance = countDown - now,
                          days = Math.floor(distance / day),
                          hours = Math.floor((distance % day) / hour),
                          minutes = Math.floor((distance % hour) / minute),
                          seconds = Math.floor((distance % minute) / second);

                        (wrapper.querySelector('.peakconversion-js-timer-days').innerText = (
                          days
                      )),

                         (wrapper.querySelector('.peakconversion-js-timer-hours').innerText = (
                              hours
                          )),

                        (wrapper.querySelector('.peakconversion-js-timer-minutes').innerText = (
                              minutes
                          )),

                    (wrapper.querySelector('.peakconversion-js-timer-seconds').innerText = (
                              seconds
                          ));

                      if (distance < 0) {
                          wrapper.querySelector('.peakconversion-js-timer-days').innerText = '00';
                          wrapper.querySelector('.peakconversion-js-timer-hours').innerText = '00';
                          wrapper.querySelector('.peakconversion-js-timer-minutes').innerText = '00';
                          wrapper.querySelector('.peakconversion-js-timer-seconds').innerText = '00';

                          document.querySelector(
                              '.peakconversion-countdown-banner-{{section.id}}-wrapper'
                          ).style.display = 'none';

                          clearInterval(interval);
                      }

                  }, second);
                  document.addEventListener('peakconversion-countdown-timer-section:unload', function (event) {
                      if (event.detail.sectionId === '{{section.id}}') clearInterval(interval);
                  });
              }
              startTimer()
              if (window.Shopify && Shopify.designMode) {
                  document.addEventListener('peakconversion-countdown-timer-section:load', function (event) {
                      if (event.detail.sectionId === '{{section.id}}') {
                          startTimer();
                      }
                  });
              }
          })();
        </script>
      </div>
    </div>
  </div>
</div>
{% schema %}
{
  "name": "PK Timer",
  "settings": [
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Image Desktop"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Image Mobile"
    },
    {
      "type": "range",
      "id": "image_radius",
      "label": "Image Radius",
      "default":15,
      "min": 10,
      "max": 100,
      "step": 1
    },
    {
      "type": "header",
      "content": "Heading",
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Text Input",
      "default":"50% off all suits and accessories"
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Text Size",
      "default":30,
      "min": 10,
      "max": 72,
      "step": 1
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default":"#ffffff"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "btn_text",
      "label": "Text",
      "default": "View Discounted Items"
    },
    {
      "type": "color",
      "id": "btn_background",
      "label": "Button Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "btn_text_color",
      "label": "Button Text Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "btn_text_size",
      "label": "Text Size",
      "default":18,
      "min": 10,
      "max": 72,
      "step": 1
    },
    {
      "type": "range",
      "id": "btn_radius",
      "label": "Button Radius",
      "default":50,
      "min": 10,
      "max": 72,
      "step": 1
    },
    {
      "type": "select",
      "id": "btn_border_type",
      "label": "Button Border Type",
      "options": [
        {
          "label": "Solid",
          "value": "solid"
        },
        {
          "label": "Dotted",
          "value": "dotted"
        },
        {
          "label": "Dashed",
          "value": "dashed"
        },
        {
          "label": "Double",
          "value": "double"
        },
        {
          "label": "Groove",
          "value": "groove"
        },
        {
          "label": "Inset",
          "value": "inset"
        },
        {
          "label": "Outset",
          "value": "outset"
        },
        {
          "label": "Ridge",
          "value": "ridge"
        },
        {
          "label": "None",
          "value": "none"
        },
      ]
    },
    {
      "type": "color",
      "id": "btn_border_color",
      "label": "Button Border Color",
      "default":"#ffffff"
    },
    {
      "type": "range",
      "id": "btn_border_size",
      "label": "Button Border Size",
      "default":0,
      "min": 0,
      "max": 72,
      "step": 1
    },
    {
      "type": "range",
      "id": "btn_mt",
      "label": "Button Margin Top",
      "default":5,
      "min":0,
      "max": 80,
      "step": 1
    },
    {
      "type": "range",
      "id": "btn_mb",
      "label": "Button Margin Bottom",
      "default":5,
      "min":0,
      "max": 80,
      "step": 1
    },
    {
      "type": "range",
      "id": "btn_pl",
      "label": "Button Paddind Left",
      "default":25,
      "min":0,
      "max": 80,
      "step": 1
    },
    {
      "type": "range",
      "id": "btn_pr",
      "label": "Button Padding Right",
      "default":25,
      "min":0,
      "max": 80,
      "step": 1
    },
    {
      "type": "header",
      "content": "Timer"
    },
    //{
      //"type": "text",
      //"id":"expiration_date",
      //"label": "Expiration Date",
        //"default":"2024-11-01"
    //},
    {
      "type": "range",
      "id": "timer_numb_size",
      "label": "Timer Number Size",
      "default":25,
      "min": 10,
      "max": 72,
      "step": 1
    },
    {
      "type": "color",
      "id": "timer_numb_color",
      "label": "Timer Number Color",
      "default":"#ffffff"
    },
     {
      "type": "range",
      "id": "timer_text_size",
      "label": "Timer text Size",
      "default":10,
      "min": 5,
      "max": 72,
      "step": 1
    },
    {
      "type": "color",
      "id": "timer_text_color",
      "label": "Timer Text Color",
      "default":"#ffffff"
    },
    {
      "type": "range",
      "id": "timer_text_mt",
      "label": "Timer text Margin Top",
      "default":6,
      "min": 5,
      "max": 80,
      "step": 1
    },

  ],
  "presets": [
    {
      "name": "PK Timer"
    }
  ]
}
{% endschema %}
